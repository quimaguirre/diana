TO DO

- Ask Emre why it does not let me reuse random networks...
	Error:
	Arguments: scoring type z, nRepetition 1, nIteration 5, nodeFile Documents/diana/scripts/../workspace/profiles/haloperidol_09c673d47894/guild_output/node_scores.sif, edgeFile Documents/diana/scripts/../workspace/profiles/haloperidol_09c673d47894/guild_output/edge_scores.sif, outputFile Documents/diana/scripts/../workspace/profiles/haloperidol_09c673d47894/guild_output/output_scores.sif.netzcore
	libc++abi.dylib: terminating with unexpected exception of type boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<std::out_of_range> >: Unable to find key in unordered_map.
- Permit to use other types of ID, not only geneID. Now, we can only use GeneID because we need geneIDs to run the functional enrichment analysis.
- Facilitate installation of BIANA and installation of GUILD
- Output: Results file in PDF? With images included of venn charts!!


Commands:

GENERATE NETWORK

python /home/quim/project/diana/diana/toolbox/generate_netscore_files_vapr2017.py -radius 0 -taxid 10090 -node /home/quim/project/tissue_specificity/mouse/main/mouse_nodes.eAFF.biana.txt -edge /home/quim/project/tissue_specificity/mouse/main/mouse_edges.eAFF.biana.txt -trans /home/quim/project/tissue_specificity/mouse/main/mouse_network.eAFF.010617 -ttype geneid -format multi-fields -eAFF -v -db BIANA_JUN_2017 -up geneid_seqtax_v2

With NetworkAnalysis:
python /home/quim/PHD/Projects/NetworkAnalysis/scripts/generate_network.py -radius 0 -taxid 9606 -edge /home/quim/PHD/Projects/NetworkAnalysis/workspace/human_edges.eAFF.biana.nov17.txt -node /home/quim/PHD/Projects/NetworkAnalysis/workspace/human_nodes.eAFF.biana.nov17.txt -trans /home/quim/PHD/Projects/NetworkAnalysis/workspace/human_network.eAFF.nov17.geneid.trans -ttype geneid -format multi-fields -eAFF


TRANSLATE NETWORK

With NetworkAnalysis:
python /home/quim/PHD/Projects/NetworkAnalysis/scripts/translate_network.py -in /home/quim/data/networks/human_eAFF_nov17/human_edges.eAFF.biana.nov17.txt -if multi-fields -on /home/quim/data/networks/human_eAFF_nov17/human_edges.eAFF.geneID.nov17.txt -of sif -trans /home/quim/data/networks/human_eAFF_nov17/human_network.eAFF.nov17.geneid.trans
With NetworkAnalysis and a hippie-filtered network:
python /home/quim/PHD/Projects/NetworkAnalysis/scripts/translate_network.py -in /home/quim/data/networks/human_eAFF_nov17/human_edges.eAFF.hippie_filtered.biana.nov17.txt -if multi-fields -on /home/quim/data/networks/human_eAFF_nov17/human_edges.eAFF.hippie_filtered.geneID.nov17.txt -of sif -trans /home/quim/data/networks/human_eAFF_nov17/human_network.eAFF.nov17.geneid.trans

PREPARE FILES CLUSTER

python /home/quim/PHD/Projects/DIANA/diana/scripts/prepare_files_cluster.py -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif



GENERATE PROFILES

# Without neither network nor targets
$> python /home/quim/PHD/Projects/DIANA/diana/scripts/generate_profiles.py -d 'metformin' -pt 'geneid' -rad 1 -res y2h

# With network and targets
python /home/quim/PHD/Projects/DIANA/diana/scripts/generate_profiles.py -d 'metformin' -t /home/quim/PHD/Projects/DIANA/diana/workspace/targets/metformin.targets -pt 'geneid' -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif

python /home/quim/PHD/Projects/DIANA/diana/scripts/generate_profiles.py -d 'haloperidol' -t /home/quim/PHD/Projects/DIANA/diana/workspace/targets/haloperidol.targets -pt 'geneid' -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif

# With network and without targets
python /home/quim/PHD/Projects/DIANA/diana/scripts/generate_profiles.py -d 'haloperidol' -pt 'geneid' -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif


COMPARE PROFILES

python /home/quim/PHD/Projects/DIANA/diana/scripts/compare_profiles.py -d1 'metformin' -t1 /home/quim/PHD/Projects/DIANA/diana/workspace/targets/metformin.targets -d2 'haloperidol' -pt 'geneid' -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif

python /home/quim/PHD/Projects/DIANA/diana/scripts/compare_profiles.py -d1 'metformin' -t1 /home/quim/PHD/Projects/DIANA/diana/workspace/targets/metformin.targets -d2 'haloperidol' -t2 /home/quim/PHD/Projects/DIANA/diana/workspace/targets/haloperidol.targets -pt 'geneid' -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif

# Using new IDs
python /home/quim/PHD/Projects/DIANA/diana/scripts/compare_profiles.py -d1 'db07597' -t1 /home/quim/PHD/Projects/DIANA/diana/workspace/targets/db07597.targets -d2 'db07596	' -t2 /home/quim/PHD/Projects/DIANA/diana/workspace/targets/db07596.targets -pt 'geneid' -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif

python /home/quim/PHD/Projects/DIANA/diana/scripts/compare_profiles.py -d1 db01151 -d2 db00659 -pt geneid -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif -ws /sbi/users/quim/DIANA_data





GENERATE PROFILES IN SBI

python /home/quim/PHD/Projects/DIANA/diana/scripts/generate_profiles.py -d 'DCC0303' -pt 'geneid' -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif


DESIGN EXPERIMENT ALL PROFILES DRUGBANK

python /home/quim/PHD/Projects/DIANA/diana/scripts/design_experiment_all_profiles.py -min 3 -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif


DESIGN EXPERIMENT DCDB IN SBI

python /home/quim/PHD/Projects/DIANA/diana/scripts/design_experiment_dcdb.py -min 3 -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif

python /home/quim/PHD/Projects/DIANA/diana/scripts/design_experiment.py -min 12 -sif /home/quim/PHD/Projects/DIANA/diana/workspace/sif/human_eAFF_geneid_2017.sif -cr /home/quim/PHD/Projects/DIANA/diana/workspace/crossings_12.txt



CLUSTER VERSION FOR SBI

Generation of profiles:

python /home/quim/project/diana_cluster/scripts/generate_profiles.py -d 'DCC0303' -pt 'geneid' -sif /home/quim/project/diana_cluster/workspace/sif/human_eAFF_geneid_2017.sif -gu /home/quim/project/diana_cluster/diana/toolbox/scoreN

python /home/quim/project/diana_cluster/scripts/generate_profiles.py -d 'DCC1743' -pt 'geneid' -sif /home/quim/project/diana_cluster/workspace/sif/human_eAFF_geneid_2017.sif -gu /home/quim/project/diana_cluster/diana/toolbox/scoreN

python /home/quim/project/diana_cluster/scripts/generate_profiles.py -d 'DB00502' -pt 'geneid' -sif /home/quim/project/diana_cluster/workspace/sif/human_eAFF_geneid_2017.sif -gu /home/quim/project/diana_cluster/diana/toolbox/scoreN


Comparison of profiles:

python /home/quim/project/diana_cluster/scripts/compare_profiles.py -d1 'DCC0303' -d2 'DCC1743' -pt 'geneid' -sif /home/quim/project/diana_cluster/workspace/sif/human_eAFF_geneid_2017.sif


GENERATE ALL PROFILES IN DRUGBANK IN MARVIN CLUSTER (with minimum targets)

python run_all_profiles_cluster.py -i diana_cluster/workspace/drugbank_drugs_selected.txt -s diana_cluster/workspace/sif/human_eAFF_geneid_2017.sif -t diana_cluster/diana/toolbox/drugbank_to_targets.pcl -w drugbank_profiles --dummy dummy

COMPARISON IN CLUSTER

python run_comparison_profiles_cluster.py -c diana_cluster/workspace/crossings_proof.txt -t diana_cluster/diana/toolbox/drugbank_to_targets.pcl -w drugbank_profiles --dummy dummy

python run_comparison_profiles_cluster.py -c diana_cluster/workspace/crossings_file.txt -t diana_cluster/diana/toolbox/drugbank_to_targets.pcl -w drugbank_profiles --dummy dummy


ANALYZE RESULTS

python /home/quim/project/diana_cluster/scripts/select_classifier.py -ws /home/quim/project/diana_results/drugbank_profiles

python /home/quim/project/diana_cluster/scripts/analyze_results_by_targets.py -ws /home/quim/project/diana_results/drugbank_profiles

python  /home/quim/project/diana_cluster/scripts/classify_drug_combinations.py -ws /home/quim/project/diana_results/drugbank_profiles

python /home/quim/project/diana_cluster/scripts/analyze_results_by_classification.py -ws /home/quim/project/diana_results/drugbank_profiles -cl pathway


DESIGN CLINICAL TRIALS STANDARD

python /home/quim/project/diana_cluster/scripts/design_clinical_trials_standard.py -min 3 -dc /home/quim/Databases/ClinicalTrials/output_files/drug_combination_pairs.tsv -cr /home/quim/project/diana_results/drugbank_profiles/clinicaltrials_crossings_file.txt -ws /home/quim/project/diana_results/drugbank_profiles

Run in cluster:
python run_comparison_profiles_cluster.py -c diana_cluster/workspace/positives_and_negatives_clinical_trials.txt -t diana_cluster/diana/toolbox/drugbank_to_targets.pcl -w drugbank_profiles --dummy dummy

Evaluate classifiers using clinical trials
python /home/quim/project/diana_cluster/scripts/evaluation_with_clinicaltrials.py -ws /home/quim/project/diana_results/drugbank_profiles

Tune the algorithm with clinical trials
python /home/quim/project/diana_cluster/scripts/tune_algorithm_with_clinicaltrials.py -ws /home/quim/project/diana_results/drugbank_profiles

Analyze results with best algorithm (SVC linear C=0.1)
python /home/quim/project/diana_cluster/scripts/analyze_results_by_targets.py -ws /home/quim/project/diana_results/drugbank_profiles

python /home/quim/project/diana_cluster/scripts/analyze_results_by_classification.py -ws /home/quim/project/diana_results/drugbank_profiles -cl pathway


GITHUB

CLONE repo:
git clone https://github.com/quimaguirre/diana.git diana_git


$> cd Documents/diana_git/
or
$> cd /home/quim/PHD/Projects/DIANA/diana_git

$> git pull origin master

$> cp /Users/quim/Documents/diana . # Or copy directly from finder the directory
or
$> cp /home/quim/PHD/Projects/DIANA/diana .

$> git status
$> git add *
$> git rm */*/.DS_Store
$> git commit -m "Generation of profiles improved"
$> git push -u origin master 
